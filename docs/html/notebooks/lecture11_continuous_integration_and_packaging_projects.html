

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>11) Automated testing and packaging your project &#8212; CHE 696: On-Ramp to Data Science 0.1 documentation</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="12) Intro to NumPy (prodounced Num-Pie), Numerical Python" href="lecture12_numpy_attributes_methods.html" />
    <link rel="prev" title="10) Writing unit tests and running from anywhere on your machine" href="lecture10_unit_testing.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="lecture12_numpy_attributes_methods.html" title="12) Intro to NumPy (prodounced Num-Pie), Numerical Python"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="lecture10_unit_testing.html" title="10) Writing unit tests and running from anywhere on your machine"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CHE 696: On-Ramp to Data Science 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="lecture10_unit_testing.html"
                        title="previous chapter">10) Writing unit tests and running from anywhere on your machine</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="lecture12_numpy_attributes_methods.html"
                        title="next chapter">12) Intro to NumPy (prodounced Num-Pie), Numerical Python</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 9ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }
</style>
<div class="section" id="11)-Automated-testing-and-packaging-your-project">
<h1>11) Automated testing and packaging your project<a class="headerlink" href="#11)-Automated-testing-and-packaging-your-project" title="Permalink to this headline">¶</a></h1>
<div class="section" id="FYI:-Continuous-integration">
<h2>FYI: Continuous integration<a class="headerlink" href="#FYI:-Continuous-integration" title="Permalink to this headline">¶</a></h2>
<p>Wouldn’t it be nice if every time we pushed to GitHub, all of our tests
were run and we got a report on whether they passed?</p>
<p>So many people want this that there are multiple tools to help you do
so. A commonly used one is <a class="reference external" href="https://docs.travis-ci.com/user/getting-started/">Travis
CI</a>. Start by
signing up at <a class="reference external" href="https://travis-ci.org/">https://travis-ci.org/</a> and follow the directions to hook
it to your GitHub account. We are using the free version so it does not
prioritize running our tests, but they will run eventually, and you’ll
get a report as to whether all tests pass on its system.</p>
<p><img alt="Screen shot" src="../_images/lect11_travisCI.png" /> <img alt="Screen shot" src="../_images/lect11_travisCI.png" /></p>
</div>
<div class="section" id="Setting-up-your-package-to-run-anywhere">
<h2>Setting up your package to run anywhere<a class="headerlink" href="#Setting-up-your-package-to-run-anywhere" title="Permalink to this headline">¶</a></h2>
<p>First, we need a place where we will have all our programs on our
computer, that our OS will look at to find them. See if you already have
the folder: <code class="docutils literal notranslate"><span class="pre">$HOME/.local/bin</span></code>. If not, please create it.</p>
<p>We also need to tell bash that this is a place to look for code. Find
where your PATHs are noted (either .bashrc or .bash_profile) and add
this line: ~~<sub>PATH=:math:`PATH:</sub>HOME/.local/bin`~~</p>
<p>Save and source the file (e.g. <code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">.bashrc</span></code>).</p>
<p>Now, in your python project, go to <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> in the main directory
for your project. Make sure that the following line is there:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>    <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;console_scripts&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;data_proc = arthritis_proj.data_proc:main&#39;</span><span class="p">,</span>
                                      <span class="p">],</span>
                  <span class="p">},</span>     <span class="n">package_dir</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;arthritis_proj&#39;</span><span class="p">:</span> <span class="s1">&#39;arthritis_proj&#39;</span><span class="p">},</span> <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;numpy&#39;</span><span class="p">,</span> <span class="s1">&#39;matplotlib&#39;</span><span class="p">]</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-fg">  File </span><span class="ansi-green-fg">&#34;&lt;ipython-input-1-6410d1927269&gt;&#34;</span><span class="ansi-cyan-fg">, line </span><span class="ansi-green-fg">1</span>
<span class="ansi-red-fg">    entry_points={&#39;console_scripts&#39;: [&#39;data_proc = arthritis_proj.data_proc:main&#39;,</span>
                ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> can&#39;t assign to literal

</pre></div></div>
</div>
<p>These <code class="docutils literal notranslate"><span class="pre">entry_points</span></code> are how we will invoke the project on the command
line (type <code class="docutils literal notranslate"><span class="pre">data_proc</span></code> to launch <code class="docutils literal notranslate"><span class="pre">arthritis_proj.data_proc:main</span></code>).</p>
<p>Now, open the terminal to the main directory and run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">sdist</span>
</pre></div>
</div>
<p>If this is your first time running the command, it will create the
folder <code class="docutils literal notranslate"><span class="pre">dist</span></code>. Let’s look there; you should see a <code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code> file
there.</p>
<div class="figure" id="id1">
<img alt="Screen shot" src="../_images/lect10_dist.png" />
<p class="caption"><span class="caption-text">Screen shot</span></p>
</div>
<p>This is a rather log name. It is identifying exactly which git version
is associated with this tarball. Let’s give it a nicer looking name by
adding a tag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">tag</span> <span class="o">-</span><span class="n">a</span> <span class="s1">&#39;ver0.0&#39;</span> <span class="o">-</span><span class="n">m</span> <span class="s1">&#39;Initial version with tests&#39;</span>
</pre></div>
</div>
<p>Again running <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">sdist</span></code> we see a nicer name, and will
delete the old one.</p>
<div class="figure" id="id2">
<img alt="Screen shot" src="../_images/lect10_dist2.png" />
<p class="caption"><span class="caption-text">Screen shot</span></p>
</div>
<p>Now, let’s install the package!</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">dist</span><span class="o">/</span><span class="n">arthritis_proj</span><span class="o">-</span><span class="n">ver0</span><span class="o">.</span><span class="mf">0.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> <span class="o">--</span><span class="n">user</span>
</pre></div>
</div>
<p>Note: We can copy this tarball to any other system and install it in the
same way. After the first time you install the project, you’ll want to
add the <code class="docutils literal notranslate"><span class="pre">--upgrade</span></code> flag after <code class="docutils literal notranslate"><span class="pre">install</span></code>.</p>
<p>Let’s check that this worked. First, let’s see if <code class="docutils literal notranslate"><span class="pre">data_proc</span></code> is now
in <code class="docutils literal notranslate"><span class="pre">$HOME/.local/bin</span></code>. It is! Hooray!</p>
<p>Now, I’m going to go to an entirely different directory and make a file
<code class="docutils literal notranslate"><span class="pre">data.csv</span></code> with the following data: ~~<sub>1,2,3,4,5 6,7,8,9,10
3,6,8,2,1 6,2,9,2,0</sub>~~</p>
<p>In that directory, all I need to do is enter <code class="docutils literal notranslate"><span class="pre">data_proc</span></code>, and the
program runs! ~~~ truffle:hw_solutions hbmayes$ data_proc Wrote file:
data_stats.csv Wrote file: data_stats.png ~~~</p>
<div class="figure" id="id3">
<img alt="Output" src="../_images/lect10_data_stats.png" />
<p class="caption"><span class="caption-text">Output</span></p>
</div>
</div>
<div class="section" id="Next-steps">
<h2>Next steps<a class="headerlink" href="#Next-steps" title="Permalink to this headline">¶</a></h2>
<p>We continue building on your programming skills, going more into helpful
libraries including numpy and pandas.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="lecture12_numpy_attributes_methods.html" title="12) Intro to NumPy (prodounced Num-Pie), Numerical Python"
             >next</a> |</li>
        <li class="right" >
          <a href="lecture10_unit_testing.html" title="10) Writing unit tests and running from anywhere on your machine"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CHE 696: On-Ramp to Data Science 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Heather Mayes.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.
    </div>
  </body>
</html>